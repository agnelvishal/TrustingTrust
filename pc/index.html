<html lang="en">

<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-47293504-5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'UA-47293504-5');
	</script>
	<script src="https://unpkg.com/blockstack@19.2.1/dist/blockstack.js"
		integrity="sha384-+qYCYoUGzsMLAzHm80c4DyhbWgHBBb2N0RFqsg7Lws5ljtBtj/IwpgxZkiR7j7lp"
		crossorigin="anonymous"></script>
	<!-- TO TRANSLATE: "title", "description" -->
	<title>Trusting Trust</title>
	<meta name="description" content="an interactive story on Trust" />
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">

	<link rel="manifest" href="manifest.json">


	<!-- TO TRANSLATE: "name", "description" -->
	<meta itemprop="name" content="Trusting Trust">
	<meta itemprop="description" content="An interactive story of trust.">
	<meta itemprop="image"
		content="https://raw.githubusercontent.com/agnelvishal/TrustingTrust/master/social/thumbnail.png">


	<!-- TO TRANSLATE: "name", "description" -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@agnelvishal">
	<meta name="twitter:title" content="Trusting Trust">
	<meta name="twitter:description" content="An interactive story of trust.">
	<meta name="twitter:creator" content="@agnelvishal">
	<meta name="twitter:image"
		content="https://raw.githubusercontent.com/agnelvishal/TrustingTrust/master/social/thumbnail.png">

	<!-- TO TRANSLATE: "name", "description" -->
	<meta property="og:title" content="Trusting Trust">
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://agnelvishal.github.io/TrustingTrust">
	<meta property="og:image"
		content="https://raw.githubusercontent.com/agnelvishal/TrustingTrust/master/social/thumbnail.png">
	<meta property="og:description" content="An interactive story of trust.">

	<!-- Styles -->
	<link rel="stylesheet" href="css/slides.css?v11">
	<link rel="stylesheet" href="css/balloon.css?v11">


</head>

<body>
	<div id="preloader">This text will disppear faster than you can read.</div> <!-- TRANSLATE THIS -->
	<div style="display:none" id="main">
		<div id="slideshow_container">
			<div id="slideshow"></div>
			<div id="scratcher"></div>
		</div>
	</div>
	<div style="display:none" id="footer">
		<div id="sound" sound="on" class="no-select">
			<div id="sound_icon"></div>
			<div id="sound_on">ON</div> <!-- TRANSLATE THIS -->
			<div id="sound_off">OFF</div> <!-- TRANSLATE THIS -->
		</div>
		<div id="select"></div>


		<sharing title="Trusting Trust" text="An interactive story of trust"
			link="https://agnelvishal.github.io/TrustingTrust"></sharing>
		<button id="signin-button">Sign in with Blockstack </button>
		<script>

			const appConfig = new blockstack.AppConfig();
			const userSession = new blockstack.UserSession({ appConfig: appConfig });

			document.getElementById('signin-button').addEventListener('click', function () {
				userSession.redirectToSignIn(redirectURI = "https://sarchy.co/TrustingTrust/pc/index.html");
			});

			async function getScore() {
				let options = {
					encrypt: false
				}
				let score = await userSession.putFile("/score.txt", options);
				console.log("score is ");
				console.log(score);
			}
			

			function storePref() {
				let options = {
					encrypt: false
				}
				val = "true";
				userSession.putFile("/alreadyPlayed.txt", val, options)
					.then(() => {
						console.log("Added aleadyPlayed to storage");
					})
			}

			if (userSession.isUserSignedIn()) {

				document.getElementById('signin-button').remove();
				storePref();
				await getScore();

			} else if (userSession.isSignInPending()) {
				userSession.handlePendingSignIn()
					.then(() => {
						console.log("Signed in by pending");
						document.getElementById('signin-button').remove();
						storePref();
						await getScore();
					})
			}


			//await getscore();
		</script>


	</div>
</body>

</html>

<!-- Libraries -->
<script src="js/lib/helpers.js?v11"></script>
<script src="js/lib/pegasus.js?v11"></script>
<script>var c_ = {};</script>
<script src="js/lib/minpubsub.src.js?v11"></script>
<script src="js/lib/q.js?v11"></script>
<script src="js/lib/pixi.min.js?v11"></script>
<script src="js/lib/howler.js?v11"></script>
<script>var createjs = window;</script>
<script src="js/lib/tweenjs-0.6.2.min.js?v11"></script>
<script>Ticker.framerate = 60; Ticker.paused = true;</script>
<script src="js/lib/sharing.js?v11"></script>

<script src="js/lib/screenfull.js?v11"></script>

<!-- Core Engine -->
<script src="js/core/Loader.js?v11"></script>
<script src="js/core/Slideshow.js?v11"></script>
<script src="js/core/SlideSelect.js?v11"></script>
<script src="js/core/Button.js?v11"></script>
<script src="js/core/TextBox.js?v11"></script>
<script src="js/core/Words.js?v11"></script>
<script src="js/core/IncDecNumber.js?v11"></script>
<script src="js/core/Slider.js?v11"></script>
<script src="js/core/Scratcher.js?v11"></script>
<script src="js/core/Background.js?v11"></script>
<script src="js/core/ImageBox.js?v11"></script>
<script src="js/core/PayoffsUI.js?v11"></script>

<!-- Simulations -->
<script src="js/sims/Splash.js?v11"></script>
<script src="js/sims/PD.js?v11"></script>
<script src="js/sims/Iterated.js?v11"></script>
<script src="js/sims/Tournament.js?v11"></script>
<script src="js/sims/SandboxUI.js?v11"></script>

<!-- Slides -->
<script src="js/slides/0_Slides_Intro.js?v11"></script>
<script src="js/slides/1_Slides_OneOff.js?v11"></script>
<script src="js/slides/2_Slides_Iterated.js?v11"></script>
<script src="js/slides/3_Slides_Tournament.js?v11"></script>
<script src="js/slides/4_Slides_Evolution.js?v11"></script>
<script src="js/slides/5_Slides_Distrust.js?v11"></script>
<script src="js/slides/6_Slides_Noise.js?v11"></script>
<script src="js/slides/7_Slides_Sandbox.js?v11"></script>
<script src="js/slides/8_Slides_Conclusion.js?v11"></script>
<script src="js/slides/9_Slides_Credits.js?v11"></script>

<!-- Main Code -->
<script src="js/main.js?v11"></script>

<script>

	//Add this below content to your HTML page, or add the js file to your page at the very top to register sercie worker
	if (navigator.serviceWorker.controller) {
		console.log('[PWA Builder] active service worker found, no need to register')
	} else {
		//Register the ServiceWorker
		navigator.serviceWorker.register('pwabuilder-sw.js', {
			scope: './'
		}).then(function (reg) {
			console.log('Service worker has been registered for scope:' + reg.scope);
		});
	}

</script>